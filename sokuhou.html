<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>緊急放屁速報</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: black;
      color: red;
      font-family: 'Courier New', monospace;
      text-align: center;
      padding: 40px;
      animation: blinkBg 1s infinite alternate;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 20px;
      animation: flashText 0.5s infinite alternate;
    }

    @keyframes blinkBg {
      0% { background: black; }
      100% { background: darkred; }
    }

    @keyframes flashText {
      0% { color: red; }
      100% { color: yellow; }
    }

    #message {
      font-size: 1.5em;
      margin-top: 30px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>🚨 緊急放屁速報 🚨</h1>
  <div id="message">強い臭いに警戒してください。</div>

  <!-- 音声再生 -->
  <audio id="alert" src="assets/alert_loop.wav" autoplay loop></audio>
  <audio id="announce" src="assets/fart_announcement.wav"></audio>

 <script>
  const alert = document.getElementById("alert");
  const announce = document.getElementById("announce");
  const message = document.getElementById("message");

  // まず保存されたデータを読み取る
  const fartData = JSON.parse(localStorage.getItem("fartData")) || {
    time: "不明",
    db: "???",
    magnitude: "???"
  };

  const generatedMessage = `
${fartData.time}ごろ、和室で強い放屁がありました。
震源地は和室のピと推定されています。
最大臭度${fartData.db}、屁グニチュードは${fartData.magnitude}と観測されています。
繰り返します――
最大臭度${fartData.db}、屁グニチュードは${fartData.magnitude}と観測されています。
和室内にいるとゲボえの恐れがあります。今すぐ逃げてください！
  `;

  // テロップ差し替え＆音声再生切り替え
  setTimeout(() => {
    alert.pause();
    announce.play();
    message.textContent = generatedMessage;
  }, 8000);
</script>

</body>
</html>
