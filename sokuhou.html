<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç·Šæ€¥æ”¾å±é€Ÿå ±</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: black;
      color: red;
      font-family: 'Courier New', monospace;
      text-align: center;
      padding: 40px;
      animation: blinkBg 1s infinite alternate;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 20px;
      animation: flashText 0.5s infinite alternate;
    }

    @keyframes blinkBg {
      0% { background: black; }
      100% { background: darkred; }
    }

    @keyframes flashText {
      0% { color: red; }
      100% { color: yellow; }
    }

    #message {
      font-size: 1.5em;
      margin-top: 30px;
      white-space: pre-wrap;
    }
     #popup {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: yellow;
    border: 4px solid red;
    width: 90%;
    max-width: 500px;
    font-family: 'Courier New', monospace;
    font-size: 1.1em;
    box-shadow: 0 0 20px red;
    z-index: 9999;
    animation: shake 0.5s infinite alternate;
  }

  .popup-header {
    background: red;
    color: white;
    padding: 8px;
    font-weight: bold;
    text-align: center;
  }

  .popup-body {
    padding: 12px;
    background: #fff700;
    color: black;
    min-height: 60px;
    white-space: pre-wrap;
  }

  @keyframes shake {
    0% { transform: translateX(-50%) translateY(0px); }
    100% { transform: translateX(-50%) translateY(-3px); }
  }
  </style>
  <div id="popup">
  <div class="popup-header">â˜ ç·Šæ€¥æ”¾å±é€Ÿå ±ï¼ˆç•°è‡­åºï¼‰ â˜</div>
  <div class="popup-body" id="popup-text">æƒ…å ±å–å¾—ä¸­â€¦</div>
</div>
</head>
<body>
  <h1>ğŸš¨ ç·Šæ€¥æ”¾å±é€Ÿå ± ğŸš¨</h1>
  <div id="message">å¼·ã„è‡­ã„ã«è­¦æˆ’ã—ã¦ãã ã•ã„ã€‚</div>

  <!-- éŸ³å£°å†ç”Ÿ -->
  <audio id="alert" src="assets/alert_loop.wav" autoplay loop></audio>
  <audio id="announce" src="assets/fart_announcement.wav"></audio>

 <script>
  const alert = document.getElementById("alert");
  const announce = document.getElementById("announce");
  const message = document.getElementById("message");

  // ã¾ãšä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹
  const fartData = JSON.parse(localStorage.getItem("fartData")) || {
    time: "ä¸æ˜",
    db: "???",
    magnitude: "???"
  };

  const generatedMessage = `
${fartData.time}ã”ã‚ã€å’Œå®¤ã§å¼·ã„æ”¾å±ãŒã‚ã‚Šã¾ã—ãŸã€‚
éœ‡æºåœ°ã¯å’Œå®¤ã®ãƒ”ã¨æ¨å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
æœ€å¤§è‡­åº¦${fartData.db}ã€å±ã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ã¯${fartData.magnitude}ã¨è¦³æ¸¬ã•ã‚Œã¦ã„ã¾ã™ã€‚
ç¹°ã‚Šè¿”ã—ã¾ã™â€•â€•
æœ€å¤§è‡­åº¦${fartData.db}ã€å±ã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ã¯${fartData.magnitude}ã¨è¦³æ¸¬ã•ã‚Œã¦ã„ã¾ã™ã€‚
å’Œå®¤å†…ã«ã„ã‚‹ã¨ã‚²ãƒœãˆã®æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚ä»Šã™ãé€ƒã’ã¦ãã ã•ã„ï¼
  `;
   const popupText = document.getElementById("popup-text");
popupText.textContent = `
${fartData.time} å’Œå®¤ã§æ”¾å±ãŒè¦³æ¸¬ã•ã‚Œã¾ã—ãŸã€‚
æœ€å¤§è‡­åº¦ ${fartData.db} ï¼ å±ã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ ${fartData.magnitude}
å®¤å†…ã«ã„ã‚‹æ–¹ã¯ãŸã ã¡ã«æ›æ°—ã—ã¦ãã ã•ã„ã€‚
`;


  // ãƒ†ãƒ­ãƒƒãƒ—å·®ã—æ›¿ãˆï¼†éŸ³å£°å†ç”Ÿåˆ‡ã‚Šæ›¿ãˆ
  setTimeout(() => {
    alert.pause();
    announce.play();
    message.textContent = generatedMessage;
  }, 8000);
</script>

</body>
</html>
